using System.Threading.Tasks;
using Microsoft.AspNetCore.Mvc;
using RE.Core.Business.Queries.Requests.Reports;
using RE.Core.Models.Filters;
using RE.Frontier.Controllers.Base;
using RE.Frontier.Infrastructure.Filters;

namespace RE.Frontier.Controllers
{
    public class ReportsController : MvcController
    {
        [Route("Reports/{rooms}")]
        [ManualTransactionFilter]
        public async Task<IActionResult> Index(RoomsFilter rooms)
        {
            var viewModel = await Mediator.Send(new GetReportsQuery { Rooms = rooms });
            return View(viewModel);
        }
    }
}
